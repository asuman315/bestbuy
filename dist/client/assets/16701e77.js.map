{"version":3,"file":"16701e77.js","sources":["../../../src/components/account/AccountCreateForm.client.jsx"],"sourcesContent":["import React from 'react';\nimport {useNavigate, Link} from '@shopify/hydrogen/client';\nimport {callLoginApi} from './LoginForm.client';\n\nexport default function AccountCreateForm() {\n  const navigate = useNavigate();\n\n  const [submitError, setSubmitError] = React.useState(null);\n\n  const [email, setEmail] = React.useState('');\n  const [emailError, setEmailError] = React.useState(null);\n\n  const [password, setPassword] = React.useState('');\n  const [passwordError, setPasswordError] = React.useState(null);\n\n  function emailValidation(email) {\n    if (email.validity.valid) return null;\n\n    return email.validity.valueMissing\n      ? 'Please enter an email'\n      : 'Please enter a valid email';\n  }\n\n  function passwordValidation(password) {\n    if (password.validity.valid) return null;\n\n    if (password.validity.valueMissing) {\n      return 'Please enter a password';\n    }\n\n    return 'Password must be at least 6 characters';\n  }\n\n  async function onSubmit(event) {\n    event.preventDefault();\n\n    setEmailError(null);\n    setPasswordError(null);\n    setSubmitError(null);\n\n    const newEmailError = emailValidation(event.target.email);\n    if (newEmailError) {\n      setEmailError(newEmailError);\n    }\n\n    const newPasswordError = passwordValidation(event.target.password);\n    if (newPasswordError) {\n      setPasswordError(newPasswordError);\n    }\n\n    if (newEmailError || newPasswordError) {\n      return;\n    }\n\n    const accountCreateResponse = await callAccountCreateApi({\n      email,\n      password,\n    });\n\n    if (accountCreateResponse.error) {\n      setSubmitError(accountCreateResponse.error);\n      return;\n    }\n\n    // this can be avoided if customerCreate mutation returns customerAccessToken\n    await callLoginApi({\n      email,\n      password,\n    });\n\n    navigate('/account');\n  }\n\n  return (\n    <div className=\"flex justify-center\">\n      <div className=\"max-w-md w-full\">\n        <h1 className=\"text-4xl\">Create an Account.</h1>\n        <form noValidate className=\"pt-6 pb-8 mt-4 mb-4\" onSubmit={onSubmit}>\n          {submitError && (\n            <div className=\"flex items-center justify-center mb-6 bg-zinc-500\">\n              <p className=\"m-4 text-s text-white\">{submitError}</p>\n            </div>\n          )}\n          <div className=\"mb-4\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline ${\n                emailError ? ' border-red-500' : 'border-gray-900'\n              }`}\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              autoComplete=\"email\"\n              required\n              placeholder=\"Email address\"\n              aria-label=\"Email address\"\n              value={email}\n              onChange={(event) => {\n                setEmail(event.target.value);\n              }}\n            />\n            <p\n              className={`text-red-500 text-xs ${\n                !emailError ? 'invisible' : ''\n              }`}\n            >\n              {emailError} &nbsp;\n            </p>\n          </div>\n          <div className=\"mb-4\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline ${\n                passwordError ? ' border-red-500' : 'border-gray-900'\n              }`}\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              placeholder=\"Password\"\n              aria-label=\"Password\"\n              value={password}\n              minLength={8}\n              required\n              onChange={(event) => {\n                setPassword(event.target.value);\n              }}\n            />\n            <p\n              className={`text-red-500 text-xs ${\n                !passwordError ? 'invisible' : ''\n              }`}\n            >\n              {passwordError} &nbsp;\n            </p>\n          </div>\n          <div className=\"flex items-center justify-between\">\n            <button\n              className=\"bg-gray-900 text-white uppercase py-2 px-4 focus:shadow-outline block w-full\"\n              type=\"submit\"\n            >\n              Create Account\n            </button>\n          </div>\n          <div className=\"flex items-center mt-4\">\n            <p className=\"align-baseline text-sm\">\n              Already have an account? &nbsp;\n              <Link className=\"inline underline\" to=\"/account\">\n                Sign in\n              </Link>\n            </p>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nfunction callAccountCreateApi({email, password, firstName, lastName}) {\n  return fetch(`/account/register`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({email, password, firstName, lastName}),\n  })\n    .then((res) => {\n      if (res.status === 200) {\n        return {};\n      } else {\n        return res.json();\n      }\n    })\n    .catch((error) => {\n      return {\n        error: error.toString(),\n      };\n    });\n}\n"],"names":["navigate","useNavigate","submitError","setSubmitError","React","useState","email","setEmail","emailError","setEmailError","password","setPassword","passwordError","setPasswordError","validity","valid","valueMissing","event","preventDefault","newEmailError","emailValidation","target","newPasswordError","passwordValidation","accountCreateResponse","callAccountCreateApi","error","callLoginApi","_jsx","_jsxs","value","firstName","lastName","fetch","method","headers","Accept","body","JSON","stringify","then","res","status","json","catch","toString"],"mappings":"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"}