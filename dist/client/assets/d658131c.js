import{r as h,S as N,a as D,R as K}from"./index.78c62200.js";import{M as Y}from"./822fbd9b.js";function L(){return L=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}var w;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(w||(w={}));var A=function(e){return e},M="beforeunload",G="popstate";function J(e){e===void 0&&(e={});var a=e,n=a.window,r=n===void 0?document.defaultView:n,s=r.history;function c(){var t=r.location,o=t.pathname,u=t.search,d=t.hash,f=s.state||{};return[f.idx,A({pathname:o,search:u,hash:d,state:f.usr||null,key:f.key||"default"})]}var i=null;function m(){if(i)l.call(i),i=null;else{var t=w.Pop,o=c(),u=o[0],d=o[1];if(l.length){if(u!=null){var f=p-u;f&&(i={action:t,location:d,retry:function(){P(f*-1)}},P(f))}}else _(t)}}r.addEventListener(G,m);var x=w.Pop,g=c(),p=g[0],v=g[1],b=V(),l=V();p==null&&(p=0,s.replaceState(L({},s.state,{idx:p}),""));function S(t){return typeof t=="string"?t:W(t)}function R(t,o){return o===void 0&&(o=null),A(L({pathname:v.pathname,hash:"",search:""},typeof t=="string"?X(t):t,{state:o,key:Q()}))}function C(t,o){return[{usr:t.state,key:t.key,idx:o},S(t)]}function T(t,o,u){return!l.length||(l.call({action:t,location:o,retry:u}),!1)}function _(t){x=t;var o=c();p=o[0],v=o[1],b.call({action:x,location:v})}function B(t,o){var u=w.Push,d=R(t,o);function f(){B(t,o)}if(T(u,d,f)){var y=C(d,p+1),k=y[0],E=y[1];try{s.pushState(k,"",E)}catch{r.location.assign(E)}_(u)}}function j(t,o){var u=w.Replace,d=R(t,o);function f(){j(t,o)}if(T(u,d,f)){var y=C(d,p),k=y[0],E=y[1];s.replaceState(k,"",E),_(u)}}function P(t){s.go(t)}var z={get action(){return x},get location(){return v},createHref:S,push:B,replace:j,go:P,back:function(){P(-1)},forward:function(){P(1)},listen:function(o){return b.push(o)},block:function(o){var u=l.push(o);return l.length===1&&r.addEventListener(M,$),function(){u(),l.length||r.removeEventListener(M,$)}}};return z}function $(e){e.preventDefault(),e.returnValue=""}function V(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(r){return r!==n})}},call:function(n){e.forEach(function(r){return r&&r(n)})}}}function Q(){return Math.random().toString(36).substr(2,8)}function W(e){var a=e.pathname,n=a===void 0?"/":a,r=e.search,s=r===void 0?"":r,c=e.hash,i=c===void 0?"":c;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function X(e){var a={};if(e){var n=e.indexOf("#");n>=0&&(a.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(a.search=e.substr(r),e=e.substr(0,r)),e&&(a.pathname=e)}return a}function ae(){const e=h.exports.useContext(N);return e?{serverProps:e.serverProps,setServerProps:e.setServerProps,pending:e.pending}:{}}function Z(){var e;return(e=h.exports.useContext(N))!==null&&e!==void 0?e:{}}const O=h.exports.createContext({});let H=!0;const U={},F=({history:e,children:a})=>{const n=h.exports.useMemo(()=>e||J(),[e]),[r,s]=h.exports.useState(n.location),[c,i]=h.exports.useState(!1),{pending:m,locationServerProps:x,setLocationServerProps:g}=Z();return te({location:r,pending:m,serverProps:x,scrollNeedsRestoration:c,onFinishNavigating:()=>i(!1)}),h.exports.useLayoutEffect(()=>{const p=n.listen(({location:v,action:b})=>{var l;U[r.key]=window.scrollY,g({pathname:v.pathname,search:v.search}),s(v);const S=(l=v.state)!==null&&l!==void 0?l:{},R=b==="POP"||!!S.scroll;i(R)});return()=>p()},[n,r,i,s,g]),D(O.Provider,{value:{history:n,location:r},children:a})};function q(){const e=h.exports.useContext(O);if(!e&&Y)throw new Error("useRouter must be used within a <Router> component");return e}function I(){return q().location}function ee(e){K.useEffect(()=>(window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}),[e])}function te({location:e,pending:a,serverProps:n,scrollNeedsRestoration:r,onFinishNavigating:s}){h.exports.useEffect(()=>{window.history.scrollRestoration="manual"},[]),ee(h.exports.useCallback(()=>{window.history.scrollRestoration="auto"},[])),h.exports.useLayoutEffect(()=>{if(H||!r){H=!1;return}const c=U[e.key];if(!a&&e.pathname===n.pathname&&e.search===n.search){if(e.hash){const m=document.querySelector(e.hash);if(m){m.scrollIntoView(),s();return}}if(c){window.scrollTo(0,c),s();return}window.scrollTo(0,0),s()}},[e.pathname,e.search,e.hash,e.key,a,n.pathname,n.search,r,s])}var se=Object.freeze(Object.defineProperty({__proto__:null,RouterContext:O,BrowserRouter:F,useRouter:q,useLocation:I},Symbol.toStringTag,{value:"Module"}));export{se as B,Z as a,I as b,W as c,ae as d,q as u};
//# sourceMappingURL=d658131c.js.map
