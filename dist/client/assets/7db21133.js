import"./5c0ecc77.js";import{r,a as t,j as g}from"./index.78c62200.js";import"./459a0640.js";import"./a4b1cbe7.js";import{d as L}from"./d658131c.js";import"./2b4d78e9.js";import"./559c173a.js";import"./2e9b5744.js";import"./c6a79924.js";import"./b6229e35.js";import"./822fbd9b.js";function M({address:e,defaultAddress:p}){const{setServerProps:u}=L(),l=()=>u("editingAddress",null),[m,n]=r.exports.useState(!1),[o,d]=r.exports.useState(null),[i,h]=r.exports.useState((e==null?void 0:e.address1)||""),[c,s]=r.exports.useState((e==null?void 0:e.address2)||""),[x,A]=r.exports.useState((e==null?void 0:e.firstName)||""),[b,k]=r.exports.useState((e==null?void 0:e.lastName)||""),[f,P]=r.exports.useState((e==null?void 0:e.company)||""),[v,j]=r.exports.useState((e==null?void 0:e.country)||""),[N,q]=r.exports.useState((e==null?void 0:e.province)||""),[C,E]=r.exports.useState((e==null?void 0:e.city)||""),[w,F]=r.exports.useState((e==null?void 0:e.phone)||""),[y,D]=r.exports.useState(p);async function I(a){a.preventDefault(),n(!0);const S=await T({id:e==null?void 0:e.originalId,firstName:x,lastName:b,company:f,address1:i,address2:c,country:v,province:N,city:C,phone:w,isDefaultAddress:y});if(n(!1),S.error){d(S.error);return}l()}return t("div",{className:"flex justify-center mt-8",children:g("div",{className:"max-w-md w-full",children:[t("button",{onClick:l,children:"< Back"}),t("h1",{className:"text-5xl mt-4",children:e?"Edit address":"Add address"}),g("form",{noValidate:!0,className:"mt-6",onSubmit:I,children:[o&&t("div",{className:"flex items-center justify-center mb-6 bg-zinc-500",children:t("p",{className:"m-4 text-s text-white",children:o})}),t("div",{className:"mt-3",children:t("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"firstname",name:"firstname",required:!0,type:"text",autoComplete:"given-name",placeholder:"First name","aria-label":"First name",value:x,onChange:a=>{A(a.target.value)}})}),t("div",{className:"mt-3",children:t("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"lastname",name:"lastname",required:!0,type:"text",autoComplete:"family-name",placeholder:"Last name","aria-label":"Last name",value:b,onChange:a=>{k(a.target.value)}})}),t("div",{className:"mt-3",children:t("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"company",name:"company",type:"text",autoComplete:"organization",placeholder:"Company","aria-label":"Company",value:f,onChange:a=>{P(a.target.value)}})}),t("div",{className:"mt-3",children:t("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"street1",name:"street1",type:"text",autoComplete:"address-line1",placeholder:"Address line 1*",required:!0,"aria-label":"Address line 1",value:i,onChange:a=>{h(a.target.value)}})}),t("div",{className:"mt-3",children:t("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"address2",name:"address2",type:"text",autoComplete:"address-line2",placeholder:"Addresss line 2","aria-label":"Address line 2",value:c,onChange:a=>{s(a.target.value)}})}),t("div",{className:"mt-3",children:t("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"country",name:"country",type:"text",autoComplete:"country-name",placeholder:"Country",required:!0,"aria-label":"Country",value:v,onChange:a=>{j(a.target.value)}})}),t("div",{className:"mt-3",children:t("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"state",name:"state",type:"text",autoComplete:"address-level1",placeholder:"State",required:!0,"aria-label":"State",value:N,onChange:a=>{q(a.target.value)}})}),t("div",{className:"mt-3",children:t("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"city",name:"city",type:"text",required:!0,autoComplete:"address-level2",placeholder:"City","aria-label":"City",value:C,onChange:a=>{E(a.target.value)}})}),t("div",{className:"mt-3",children:t("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"phone",name:"phone",type:"tel",autoComplete:"tel",placeholder:"Phone","aria-label":"Phone",value:w,onChange:a=>{F(a.target.value)}})}),g("div",{className:"mt-4",children:[t("input",{type:"checkbox",value:"",name:"defaultAddress",id:"defaultAddress",checked:y,className:"accent-black",onChange:()=>D(!y)}),t("label",{className:"ml-1 inline-block text-gray-800",htmlFor:"defaultAddress",children:"Set as default address"})]}),t("div",{className:"mt-6",children:t("button",{className:"bg-gray-900 border border-gray-900 text-white uppercase py-3 px-4 focus:shadow-outline block w-full",type:"submit",disabled:m,children:"Save"})}),t("div",{children:t("button",{className:"mt-3 text-center border border-gray-900 uppercase py-3 px-4 focus:shadow-outline block w-full",onClick:l,children:"Cancel"})})]})]})})}function T({id:e,firstName:p,lastName:u,company:l,address1:m,address2:n,country:o,province:d,city:i,phone:h,isDefaultAddress:c}){return fetch(e?`/account/address/${encodeURIComponent(e)}`:"/account/address",{method:e?"PATCH":"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({firstName:p,lastName:u,company:l,address1:m,address2:n,country:o,province:d,city:i,phone:h,isDefaultAddress:c})}).then(s=>s.ok?{}:s.json()).catch(()=>({error:"Error saving address. Please try again."}))}export{M as default};
//# sourceMappingURL=7db21133.js.map
