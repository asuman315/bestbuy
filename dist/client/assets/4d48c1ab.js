import{R as o,a as e,j as a,F as x}from"./index.78c62200.js";import{Link as w}from"./5c0ecc77.js";import"./459a0640.js";import"./a4b1cbe7.js";import"./d658131c.js";import"./2b4d78e9.js";import"./559c173a.js";import"./2e9b5744.js";import"./c6a79924.js";import{u as E}from"./b6229e35.js";import"./822fbd9b.js";function M({shopName:i}){const s=E(),[t,l]=o.useState(!1),[n,m]=o.useState(!0),[c,p]=o.useState(""),[y,d]=o.useState(null),[h,f]=o.useState(""),[v,u]=o.useState(null);function N(r){r.preventDefault(),d(null),l(!1),u(null),n?S(r):j(r)}function S(r){r.target.email.validity.valid?m(!1):d("Please enter a valid email")}async function j(r){const g=r.target.password.validity;g.valid?(await P({email:c,password:h})).error?(l(!0),b()):s("/account"):u(g.valueMissing?"Please enter a password":"Passwords must be at least 6 characters")}function b(){m(!0),p(""),d(null),f(""),u(null)}return e("div",{className:"flex justify-center",children:a("div",{className:"max-w-md w-full",children:[e("h1",{className:"text-4xl",children:"Sign in."}),a("form",{noValidate:!0,className:"pt-6 pb-8 mt-4 mb-4",onSubmit:N,children:[t&&e("div",{className:"flex items-center justify-center mb-6 bg-zinc-500",children:e("p",{className:"m-4 text-s text-white",children:"Sorry we did not recognize either your email or password. Please try to sign in again or create a new account."})}),n&&e(k,{shopName:i,email:c,setEmail:p,emailError:y}),!n&&e(C,{email:c,resetForm:b}),!n&&e(F,{password:h,setPassword:f,passwordError:v})]})]})})}function P({email:i,password:s}){return fetch("/account/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:i,password:s})}).then(t=>t.ok?{}:t.json()).catch(t=>({error:t.toString()}))}function k({email:i,setEmail:s,emailError:t,shopName:l}){return a(x,{children:[a("div",{className:"mb-4",children:[e("input",{className:`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline ${t?" border-red-500":"border-gray-900"}`,id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"Email address","aria-label":"Email address",value:i,onChange:n=>{s(n.target.value)}}),a("p",{className:`text-red-500 text-xs ${t?"":"invisible"}`,children:[t," \xA0"]})]}),e("div",{className:"flex items-center justify-between",children:e("button",{className:"bg-gray-900 text-white uppercase py-2 px-4 focus:shadow-outline block w-full",type:"submit",children:"Next"})}),e("div",{className:"flex items-center mt-4",children:a("p",{className:"align-baseline text-sm",children:["New to ",l,"? \xA0",e(w,{className:"inline underline",to:"/account/register",children:"Create an account"})]})})]})}function C({email:i,resetForm:s}){return a("div",{className:"mb-6 flex items-center justify-between",children:[a("div",{children:[e("p",{children:i}),e("input",{className:"hidden",type:"text",autoComplete:"username",value:i,readOnly:!0})]}),e("div",{children:e("button",{className:"inline-block align-baseline text-sm underline",type:"button",onClick:s,children:"Change email"})})]})}function F({password:i,setPassword:s,passwordError:t}){return a(x,{children:[a("div",{className:"mb-6",children:[e("input",{className:`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline ${t?" border-red-500":"border-gray-900"}`,id:"password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password","aria-label":"Password",value:i,minLength:8,required:!0,onChange:l=>{s(l.target.value)}}),a("p",{className:`text-red-500 text-xs ${t?"":"invisible"}`,children:[t," \xA0"]})]}),e("div",{className:"flex items-center justify-between",children:e("button",{className:"bg-gray-900 text-white uppercase py-2 px-4 focus:shadow-outline block w-full",type:"submit",children:"Sign in"})}),a("div",{className:"flex items-center justify-between mt-4",children:[e("div",{className:"flex-1"}),e(w,{className:"inline-block align-baseline text-sm text-gray-500",to:"/account/recover",children:"Forgot password"})]})]})}export{P as callLoginApi,M as default};
//# sourceMappingURL=4d48c1ab.js.map
