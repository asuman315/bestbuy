{"version":3,"file":"7db21133.js","sources":["../../../src/components/account/EditAddress.client.jsx"],"sourcesContent":["import {useServerProps} from '@shopify/hydrogen';\nimport {useState} from 'react';\n\nexport default function EditAddress({address, defaultAddress}) {\n  const {setServerProps} = useServerProps();\n  const close = () => setServerProps('editingAddress', null);\n  const [saving, setSaving] = useState(false);\n  const [submitError, setSubmitError] = useState(null);\n\n  const [address1, setAddress1] = useState(address?.address1 || '');\n  const [address2, setAddress2] = useState(address?.address2 || '');\n  const [firstName, setFirstName] = useState(address?.firstName || '');\n  const [lastName, setLastName] = useState(address?.lastName || '');\n  const [company, setCompany] = useState(address?.company || '');\n  const [country, setCountry] = useState(address?.country || '');\n  const [province, setProvince] = useState(address?.province || '');\n  const [city, setCity] = useState(address?.city || '');\n  const [phone, setPhone] = useState(address?.phone || '');\n\n  const [isDefaultAddress, setIsDefaultAddress] = useState(defaultAddress);\n\n  async function onSubmit(event) {\n    event.preventDefault();\n\n    setSaving(true);\n\n    const response = await callUpdateAddressApi({\n      id: address?.originalId,\n      firstName,\n      lastName,\n      company,\n      address1,\n      address2,\n      country,\n      province,\n      city,\n      phone,\n      isDefaultAddress,\n    });\n\n    setSaving(false);\n\n    if (response.error) {\n      setSubmitError(response.error);\n      return;\n    }\n\n    close();\n  }\n\n  return (\n    <div className=\"flex justify-center mt-8\">\n      <div className=\"max-w-md w-full\">\n        <button onClick={close}>{'< Back'}</button>\n        <h1 className=\"text-5xl mt-4\">\n          {address ? 'Edit address' : 'Add address'}\n        </h1>\n        <form noValidate className=\"mt-6\" onSubmit={onSubmit}>\n          {submitError && (\n            <div className=\"flex items-center justify-center mb-6 bg-zinc-500\">\n              <p className=\"m-4 text-s text-white\">{submitError}</p>\n            </div>\n          )}\n          <div className=\"mt-3\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900`}\n              id=\"firstname\"\n              name=\"firstname\"\n              required\n              type=\"text\"\n              autoComplete=\"given-name\"\n              placeholder=\"First name\"\n              aria-label=\"First name\"\n              value={firstName}\n              onChange={(event) => {\n                setFirstName(event.target.value);\n              }}\n            />\n          </div>\n          <div className=\"mt-3\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900`}\n              id=\"lastname\"\n              name=\"lastname\"\n              required\n              type=\"text\"\n              autoComplete=\"family-name\"\n              placeholder=\"Last name\"\n              aria-label=\"Last name\"\n              value={lastName}\n              onChange={(event) => {\n                setLastName(event.target.value);\n              }}\n            />\n          </div>\n          <div className=\"mt-3\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900`}\n              id=\"company\"\n              name=\"company\"\n              type=\"text\"\n              autoComplete=\"organization\"\n              placeholder=\"Company\"\n              aria-label=\"Company\"\n              value={company}\n              onChange={(event) => {\n                setCompany(event.target.value);\n              }}\n            />\n          </div>\n          <div className=\"mt-3\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900`}\n              id=\"street1\"\n              name=\"street1\"\n              type=\"text\"\n              autoComplete=\"address-line1\"\n              placeholder=\"Address line 1*\"\n              required\n              aria-label=\"Address line 1\"\n              value={address1}\n              onChange={(event) => {\n                setAddress1(event.target.value);\n              }}\n            />\n          </div>\n          <div className=\"mt-3\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900`}\n              id=\"address2\"\n              name=\"address2\"\n              type=\"text\"\n              autoComplete=\"address-line2\"\n              placeholder=\"Addresss line 2\"\n              aria-label=\"Address line 2\"\n              value={address2}\n              onChange={(event) => {\n                setAddress2(event.target.value);\n              }}\n            />\n          </div>\n          <div className=\"mt-3\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900`}\n              id=\"country\"\n              name=\"country\"\n              type=\"text\"\n              autoComplete=\"country-name\"\n              placeholder=\"Country\"\n              required\n              aria-label=\"Country\"\n              value={country}\n              onChange={(event) => {\n                setCountry(event.target.value);\n              }}\n            />\n          </div>\n          <div className=\"mt-3\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900`}\n              id=\"state\"\n              name=\"state\"\n              type=\"text\"\n              autoComplete=\"address-level1\"\n              placeholder=\"State\"\n              required\n              aria-label=\"State\"\n              value={province}\n              onChange={(event) => {\n                setProvince(event.target.value);\n              }}\n            />\n          </div>\n          <div className=\"mt-3\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900`}\n              id=\"city\"\n              name=\"city\"\n              type=\"text\"\n              required\n              autoComplete=\"address-level2\"\n              placeholder=\"City\"\n              aria-label=\"City\"\n              value={city}\n              onChange={(event) => {\n                setCity(event.target.value);\n              }}\n            />\n          </div>\n          <div className=\"mt-3\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900`}\n              id=\"phone\"\n              name=\"phone\"\n              type=\"tel\"\n              autoComplete=\"tel\"\n              placeholder=\"Phone\"\n              aria-label=\"Phone\"\n              value={phone}\n              onChange={(event) => {\n                setPhone(event.target.value);\n              }}\n            />\n          </div>\n          <div className=\"mt-4\">\n            <input\n              type=\"checkbox\"\n              value=\"\"\n              name=\"defaultAddress\"\n              id=\"defaultAddress\"\n              checked={isDefaultAddress}\n              className=\"accent-black\"\n              onChange={() => setIsDefaultAddress(!isDefaultAddress)}\n            />\n            <label\n              className=\"ml-1 inline-block text-gray-800\"\n              htmlFor=\"defaultAddress\"\n            >\n              Set as default address\n            </label>\n          </div>\n          <div className=\"mt-6\">\n            <button\n              className=\"bg-gray-900 border border-gray-900 text-white uppercase py-3 px-4 focus:shadow-outline block w-full\"\n              type=\"submit\"\n              disabled={saving}\n            >\n              Save\n            </button>\n          </div>\n          <div>\n            <button\n              className=\"mt-3 text-center border border-gray-900 uppercase py-3 px-4 focus:shadow-outline block w-full\"\n              onClick={close}\n            >\n              Cancel\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nfunction callUpdateAddressApi({\n  id,\n  firstName,\n  lastName,\n  company,\n  address1,\n  address2,\n  country,\n  province,\n  city,\n  phone,\n  isDefaultAddress,\n}) {\n  return fetch(\n    id ? `/account/address/${encodeURIComponent(id)}` : '/account/address',\n    {\n      method: id ? 'PATCH' : 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        firstName,\n        lastName,\n        company,\n        address1,\n        address2,\n        country,\n        province,\n        city,\n        phone,\n        isDefaultAddress,\n      }),\n    },\n  )\n    .then((res) => {\n      if (res.ok) {\n        return {};\n      } else {\n        return res.json();\n      }\n    })\n    .catch(() => {\n      return {\n        error: 'Error saving address. Please try again.',\n      };\n    });\n}\n"],"names":["address","defaultAddress","setServerProps","useServerProps","close","saving","setSaving","useState","submitError","setSubmitError","address1","setAddress1","address2","setAddress2","firstName","setFirstName","lastName","setLastName","company","setCompany","country","setCountry","province","setProvince","city","setCity","phone","setPhone","isDefaultAddress","setIsDefaultAddress","event","preventDefault","response","callUpdateAddressApi","id","originalId","error","_jsx","_jsxs","target","value","fetch","encodeURIComponent","method","headers","Accept","body","JSON","stringify","then","res","ok","json","catch"],"mappings":"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"}