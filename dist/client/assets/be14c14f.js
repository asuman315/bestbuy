import{r as t,a as e,j as d}from"./index.78c62200.js";import"./5c0ecc77.js";import"./459a0640.js";import"./a4b1cbe7.js";import{d as R}from"./d658131c.js";import"./2b4d78e9.js";import"./559c173a.js";import"./2e9b5744.js";import"./c6a79924.js";import"./b6229e35.js";import"./822fbd9b.js";function U(a){return a.validity.valid?null:a.validity.valueMissing?"Please enter an email":"Please enter a valid email"}function L(a){return a.validity.valid?null:a.validity.valueMissing?"Please enter a password":"Password must be at least 6 characters"}function Z({firstName:a="",lastName:n="",phone:l="",email:i=""}){const{setServerProps:o}=R(),s=t.exports.useCallback(()=>o("editingAccount",!1),[o]),[c,f]=t.exports.useState(!1),[b,M]=t.exports.useState(a),[y,F]=t.exports.useState(n),[v,T]=t.exports.useState(l),[P,V]=t.exports.useState(i),[w,N]=t.exports.useState(null),[E,S]=t.exports.useState(),[C,j]=t.exports.useState(),[h,A]=t.exports.useState(),[k,q]=t.exports.useState(null);async function D(r){r.preventDefault(),N(null),S(null),j(null),A(null);const g=U(r.target.email);g&&N(g);let u,m,p;if(r.target.currentPassword.value&&(u=L(r.target.currentPassword),u&&S(u),m=L(r.target.newPassword),m&&j(m),p=r.target.newPassword.value!==r.target.newPassword2.value?"The two passwords entered did not match":null,p&&A(p)),g||u||m||p)return;f(!0);const $=await z({email:P,newPassword:r.target.newPassword.value,currentPassword:r.target.currentPassword.value,phone:v,firstName:b,lastName:y});if(f(!1),$.error){q($.error);return}s()}return e("div",{className:"flex justify-center mt-8",children:d("div",{className:"max-w-md w-full",children:[e("button",{onClick:s,children:"< Back"}),e("h1",{className:"text-5xl mt-4",children:"Edit account details"}),d("form",{noValidate:!0,className:"mt-6",onSubmit:D,children:[k&&e("div",{className:"flex items-center justify-center mb-6 bg-zinc-500",children:e("p",{className:"m-4 text-s text-white",children:k})}),e("h2",{className:"text-xl font-medium",children:"Profile"}),e("div",{className:"mt-3",children:e("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"firstname",name:"firstname",type:"text",autoComplete:"given-name",placeholder:"First name","aria-label":"First name",value:b,onChange:r=>{M(r.target.value)}})}),e("div",{className:"mt-3",children:e("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"lastname",name:"lastname",type:"text",autoComplete:"family-name",placeholder:"Last name","aria-label":"Last name",value:y,onChange:r=>{F(r.target.value)}})}),e("div",{className:"mt-3",children:e("input",{className:"mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline border-gray-900",id:"phone",name:"phone",type:"tel",autoComplete:"tel",placeholder:"Mobile","aria-label":"Mobile",value:v,onChange:r=>{T(r.target.value)}})}),d("div",{className:"mt-3",children:[e("input",{className:`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline ${w?" border-red-500":"border-gray-900"}`,id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"Email address","aria-label":"Email address",value:P,onChange:r=>{V(r.target.value)}}),d("p",{className:`text-red-500 text-xs ${w?"":"invisible"}`,children:[w," \xA0"]})]}),e("h2",{className:"text-xl font-medium mt-4",children:"Security"}),e(x,{name:"currentPassword",label:"Current password",passwordError:E}),e(x,{name:"newPassword",label:"New password",passwordError:C}),e("p",{className:`text-sm font-medium ${E||C?"text-red-500":""}`,children:"Passwords must be at least 6 characters."}),e(x,{name:"newPassword2",label:"Re-enter new password",passwordError:h}),d("p",{className:`text-red-500 text-xs ${h?"":"invisible"}`,children:[h," \xA0"]}),e("div",{className:"mt-4",children:e("button",{className:"bg-gray-900 border border-gray-900 text-white uppercase py-3 px-4 focus:shadow-outline block w-full",type:"submit",disabled:c,children:"Save"})}),e("div",{children:e("button",{className:"mt-3 text-center border border-gray-900 uppercase py-3 px-4 focus:shadow-outline block w-full",onClick:s,children:"Cancel"})})]})]})})}function x({name:a,passwordError:n,label:l}){const[i,o]=t.exports.useState("");return e("div",{className:"mt-3",children:e("input",{className:`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline ${n?" border-red-500":"border-gray-900"}`,id:a,name:a,type:"password",autoComplete:a==="currentPassword"?"current-password":null,placeholder:l,"aria-label":l,value:i,minLength:8,required:!0,onChange:s=>{o(s.target.value)}})})}function z({email:a,phone:n,firstName:l,lastName:i,currentPassword:o,newPassword:s}){return fetch("/account",{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,phone:n,firstName:l,lastName:i,currentPassword:o,newPassword:s})}).then(c=>c.ok?{}:c.json()).catch(()=>({error:"Error saving account. Please try again."}))}export{Z as default};
//# sourceMappingURL=be14c14f.js.map
