{"version":3,"file":"a35395f9.js","sources":["../../../src/components/account/AccountActivateForm.client.jsx"],"sourcesContent":["import React from 'react';\nimport {useNavigate} from '@shopify/hydrogen/client';\n\nexport default function AccountActivateForm({id, activationToken}) {\n  const navigate = useNavigate();\n\n  const [submitError, setSubmitError] = React.useState(null);\n\n  const [password, setPassword] = React.useState('');\n  const [passwordError, setPasswordError] = React.useState(null);\n\n  const [passwordConfirm, setPasswordConfirm] = React.useState('');\n  const [passwordConfirmError, setPasswordConfirmError] = React.useState(null);\n\n  function passwordValidation(form) {\n    setPasswordError(null);\n    setPasswordConfirmError(null);\n\n    let hasError = false;\n\n    if (!form.password.validity.valid) {\n      hasError = true;\n      setPasswordError(\n        form.password.validity.valueMissing\n          ? 'Please enter a password'\n          : 'Passwords must be at least 6 characters',\n      );\n    }\n\n    if (!form.passwordConfirm.validity.valid) {\n      hasError = true;\n      setPasswordConfirmError(\n        form.password.validity.valueMissing\n          ? 'Please re-enter a password'\n          : 'Passwords must be at least 6 characters',\n      );\n    }\n\n    if (password !== passwordConfirm) {\n      hasError = true;\n      setPasswordConfirmError('The two passwords entered did not match.');\n    }\n\n    return hasError;\n  }\n\n  async function onSubmit(event) {\n    event.preventDefault();\n\n    if (passwordValidation(event.target)) {\n      return;\n    }\n\n    const response = await callActivateApi({\n      id,\n      activationToken,\n      password,\n    });\n\n    if (response.error) {\n      setSubmitError(response.error);\n      return;\n    }\n\n    navigate('/account');\n  }\n\n  return (\n    <div className=\"flex justify-center\">\n      <div className=\"max-w-md w-full\">\n        <h1 className=\"text-4xl\">Activate Account.</h1>\n        <p className=\"mt-4\">Create your password to activate your account.</p>\n        <form noValidate className=\"pt-6 pb-8 mt-4 mb-4\" onSubmit={onSubmit}>\n          {submitError && (\n            <div className=\"flex items-center justify-center mb-6 bg-zinc-500\">\n              <p className=\"m-4 text-s text-white\">{submitError}</p>\n            </div>\n          )}\n          <div className=\"mb-4\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline ${\n                passwordError ? ' border-red-500' : 'border-gray-900'\n              }`}\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              placeholder=\"Password\"\n              aria-label=\"Password\"\n              value={password}\n              minLength={8}\n              required\n              onChange={(event) => {\n                setPassword(event.target.value);\n              }}\n            />\n            <p\n              className={`text-red-500 text-xs ${\n                !passwordError ? 'invisible' : ''\n              }`}\n            >\n              {passwordError} &nbsp;\n            </p>\n          </div>\n          <div className=\"mb-4\">\n            <input\n              className={`mb-1 appearance-none border w-full py-2 px-3 text-gray-800 placeholder:text-gray-500 leading-tight focus:shadow-outline ${\n                passwordConfirmError ? ' border-red-500' : 'border-gray-900'\n              }`}\n              id=\"passwordConfirm\"\n              name=\"passwordConfirm\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              placeholder=\"Re-enter password\"\n              aria-label=\"Re-enter password\"\n              value={passwordConfirm}\n              required\n              minLength={8}\n              onChange={(event) => {\n                setPasswordConfirm(event.target.value);\n              }}\n            />\n            <p\n              className={`text-red-500 text-xs ${\n                !passwordConfirmError ? 'invisible' : ''\n              }`}\n            >\n              {passwordConfirmError} &nbsp;\n            </p>\n          </div>\n          <div className=\"flex items-center justify-between\">\n            <button\n              className=\"bg-gray-900 text-white uppercase py-2 px-4 focus:shadow-outline block w-full\"\n              type=\"submit\"\n            >\n              Save\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nfunction callActivateApi({id, activationToken, password}) {\n  return fetch(`/account/activate`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({id, activationToken, password}),\n  })\n    .then((res) => {\n      if (res.ok) {\n        return {};\n      } else {\n        return res.json();\n      }\n    })\n    .catch((error) => {\n      return {\n        error: error.toString(),\n      };\n    });\n}\n"],"names":["id","activationToken","navigate","useNavigate","submitError","setSubmitError","React","useState","password","setPassword","passwordError","setPasswordError","passwordConfirm","setPasswordConfirm","passwordConfirmError","setPasswordConfirmError","form","hasError","validity","valid","valueMissing","event","passwordValidation","preventDefault","target","response","callActivateApi","error","_jsx","_jsxs","value","fetch","method","headers","Accept","body","JSON","stringify","then","res","ok","json","catch","toString"],"mappings":"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"}